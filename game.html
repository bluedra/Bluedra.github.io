<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>SWORD</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
        var font = 22;      //设置默认字体
        var succ = 1;       //1成功 2失败 3大成功 4大失败 （大成功和大失败已经作废。
        var checkedData;    //选中的data块
        var checkedBtn;     //选中的btn
        var datas = [
            {
                "id": 1,
                "content": "坠落，不停的坠落。周围是一片虚空，你只感觉到自己的身体好像无比沉重，又好像无比轻盈。你的意识一片模糊，正如这片深邃的纯粹的黑暗。<br>\n你不知在虚空中下坠了多久，终于，一束亮光从虚空的尽头投下，光束将你的身体轻轻包裹，你能感受到模糊的白色粒子悬浮在你周边，最后，你的意识缓缓苏醒。",
                "btn1": "醒来",
                "btn1Succ": 11
            },
            {
                "id": 11,
                "content": "你的意识挣扎着，在光束的指引下，逃离这片虚空。你的四肢虚弱无力，你的脑袋在隐隐作痛，你努力睁开朦胧的双眼，视野却被一片淡黄色和粉红色填满。<br>\n你隐约回想起来，你在先前的战斗中败给了一只狐狸魔王。你拼命攻击，奋力挥动武器，那家伙却轻描淡写，仿佛将你玩弄于股掌之中。最后，你无力地趴在地上，任凭那家伙的脚爪践踏在你头顶，将你的脑袋狠狠踩在地上蹂躏。在屈辱之中，你渐渐失去意识。<br>\n昏迷之前，你的脑海里似乎响起魔王的声音。<br>\n“让我们玩个有趣的‘小’游戏吧。”<br>\n……<br>\n然后，就是现在的场景。你的眼睛被浓稠的分泌物黏住，这让你无法看清面前的色块究竟是什么。",
                "btn1": "揉揉眼睛，再进行观察",
                "btn1Succ": 12
            },
            {
                "id": 12,
                "content": "那么你揉了揉你的眼睛，将泪水和角膜的分泌物混合的淡黄色粘稠物抹去，再眨眨眼睛，这让你的视力恢复了，你得以看清面前的东西。<br>\n那是一个庞大而宽阔的东西，它比你的身高还长了不少，而你展开双臂也不能将它环抱，它看上去能轻易的把你与之相比显得瘦弱的身躯压在下面。淡黄色的，约有一根指头长的绒毛密密麻麻覆盖了这个物体的大部分区域，而在其中镶嵌着四小一大，一共五团粉色的，略显粗糙的，像是皮革制的抱枕似的东西。但其实即便是最小的一颗也像你的脑袋一般大。<br>\n你觉得这个巨大的物体的形状有点像什么你非常熟悉的东西。没错，是兽爪，你可以笃定，你面前的是一只巨大的兽足。四道能轻易塞进去胳膊的缝隙是爪趾间的空隙，而那五团“皮革抱枕”是爪趾和爪掌上的肉球。你昂起头，果然看到四根漆黑反光的尖锐指甲。<br>\n再然后，你全身的感官也渐渐苏醒，你闻到了独特的，略微有些浓厚的气味，这个味道正是来自于面前的巨大脚爪。你不由得思考起一些问题，你现在在哪？这个比你还要大的脚爪究竟是什么玩意？",
                "btn1": "确认自己是不是还在做梦",
                "btn1Succ": 13,
                "btn2": "再仔细观察脚爪和四周的情况 <侦查检定（感知）>",
                "btn2Type": "WIS",
                "difficulty2": "1",
                "btn2Succ": 14,
                "btn2Def": 15,
                "btn3": "惊疑于这只巨爪",
                "btn3Succ": 16
            },
            {
                "id": 13,
                "content": "你能闻到来自这只脚爪的味道，并不腥臭，但带着浓浓的体味。并且你能感觉到这只脚爪散发着温热，近似于你的体温。但你还不满足，你又在胳膊上狠狠拧了一把，让久久不消退的灼痛告诉你，这不是一场梦。",
                "btn1": "再仔细观察脚爪和四周的情况 <侦查检定（感知）>",
                "btn1Type": "WIS",
                "difficulty1": "1",
                "btn1Succ": 14,
                "btn1Def": 15,
                "btn2": "惊疑于这只巨爪",
                "btn2Succ": 16
            },
            {
                "id": 14,
                "content": "淡黄色的爪掌遮蔽了你的大部分视线，但你还是能侧过头去，瞥见缝隙外略微有些昏暗的世界。你好像处于一座几十米宽的地毯上，而长度更是一直绵延到昏暗的视线尽头。地毯上的魔法花纹红黄相间，你的身体可以随意躺在其中一个纹路交织而形成的格子中，而不会触碰到“边框”。<br>\n比八车道的马路还宽阔的地毯，再之外是参天而起的巨大“路灯”。受制于爪底狭窄的视野，你只能看到那比百年老树还粗壮的灯杆，以及从苍穹之上投下来的橘黄色光芒。<br>\n你意识到自己仿佛处于巨人的城堡之中。不过比起这种夸张的想法，另一种猜测就显得合理了许多。",
                "btn1": "所以……我的身体被变小了？",
                "btn1Succ": 17
            },
            {
                "id": 15,
                "content": "不行，你被这只巨大的脚爪震惊到了，你根本无法集中注意力于身后身侧的一切事物。你只觉得身下的地毯有些不正常，是上面的羊毛太长了些吗？比起这个，你有些害怕，你觉得这只半抬起的巨爪随时都有可能压下来。",
                "btn1": "远离这只脚爪！",
                "btn1Succ": 18
            },
            {
                "id": 16,
                "content": "你发出了惊呼声。你很快意识到问题，慌忙捂住嘴巴，但已经迟了。巨爪必然属于一只巨兽，而那只巨爪缓缓的挪动了，往你的侧面倾了倾，这也意味着巨兽注意到了你的存在。<br >\n“看来你还没搞清楚自己的状况呀。”巨兽的声音如低沉的雷声，在你头顶轰鸣。",
                "btn1": "慌忙逃跑<敏捷检定（困难）>",
                "btn1Type": "DEX",
                "difficulty1": "0.5",
                "btn1Succ": 101,
                "btn1Def": 102,
                "btn2": "抬头观察这只巨兽",
                "btn2Succ": 103
            },
            {
                "id": 17,
                "content": "你意识到并不是周围的一切都变大了，而是自己变小了。你从周围环境和脚爪大小推断，你的身高大概缩小到了原先的十分之一。能改变生物体型的魔法并不罕见，但能缩小十倍的法术你可从未听说过。<br>\n你发现周围的环境异常熟悉，远处几乎不可见的墙砖，昏暗的视野，投下橘黄光芒的魔法光源，以及它们摆放的位置。你大概能确定自己仍处于魔王的城堡中，而面前这只淡黄色的脚爪，似乎与你昏迷之前，踏在你头顶的那只一模一样……<br>\n头顶炸如雷鸣的声音打断了你的思绪。“看来你已经大概猜到发生什么了。”",
                "btn1": "慌忙逃跑<敏捷检定（困难）>",
                "btn1Type": "DEX",
                "difficulty1": "0.5",
                "btn1Succ": 101,
                "btn1Def": 102,
                "btn2": "抬头观察这只巨兽",
                "btn2Succ": 103
            },
            {
                "id": 18,
                "content": "不管怎样，这只巨爪一定属于一只巨大的生物，而呆在那样一只巨型生物的爪下显然是不明智的做法。你翻转身体，想要从爪底离开，但隆起的背部却蹭到了爪掌比大床还宽阔的肉垫上。霎时间你惊出一身冷汗，你已经感觉到那只巨爪在移动，那个巨型生物已经注意到了你。<br >\n“看来你还没搞清楚自己的状况呀。”巨大生物的声音如低沉的雷声，在你头顶轰鸣。",
                "btn1": "慌忙逃跑<敏捷检定（困难）>",
                "btn1Type": "DEX",
                "difficulty1": "0.5",
                "btn1Succ": 101,
                "btn1Def": 102,
                "btn2": "抬头观察这只巨兽",
                "btn2Succ": 103
            },
            {
                "id": 101,
                "content": "恐惧激发了你体内野性的本能，你的身体爆发出无与伦比的速度。你在那只巨爪的主人有所察觉，压下脚爪之前窜了出去，巨爪踩在地上，在你的身后荡起些许尘土。<br>\n巨兽显然不打算就这么放你离开，你听到身后沉沉的脚步声，不急不缓，但无论你怎样拼尽全力奔跑，也不能与巨兽拉开距离。脚步声离你越来越近，再然后，你感觉头顶一暗，那只巨大的脚爪已经悬停在你的头顶，大约是你两倍身高的位置。<br>\n",
                "btn1": "翻滚闪躲",
                "btn1Succ": 104,
                "btn2": "抬头观望",
                "btn2Succ": 105
            },
            {
                "id": 104,
                "content": "眼看巨爪缓缓落下，马上就要触碰到你的脑袋，你双腿猛然发力，向着侧前方扑出，两只手爪着地，借力在地毯上翻滚一周。咚，巨大的脚爪就落在你的身边，发出的冲击让你的身躯从外至里都在颤抖。你险之又险的躲过了巨兽的这一次踩踏，可你旁边的巨爪又一次抬起，上面的绒毛几乎是擦着你的身体。<br>\n你慌忙调整姿势，而这一次，巨爪落在你的面前，树干一样粗壮的小腿和爪根遮挡了你的视线，腿腹上白色的绒毛擦着你的脸。你意识到自己不可能跑得过身高几乎是自己十倍的巨兽，他正在把你当做猎物、当做玩具一样戏耍。<br>\n就此放弃，还是再想一些别的办法？\n",
                "btn1": "喘着气坐回地上，仰头观望",
                "btn1Succ": 103,
                "btn2": "找个地方躲藏起来<隐匿检定（极难敏捷）>",
                "btn2Succ": 111,
                "btn2Def": 112,
                "btn2Type": "DEX",
                "difficulty2": "0.2"
            },
            {
                "id": 102,
                "content": "你想要逃跑，但可能是因为才从昏迷中醒来不久，你感觉身体像是不属于你一样，难以操控。巨兽的体型虽然庞大，可一点也不笨拙，脚爪往你逃跑的方向稍作挪动，然后半抬起的巨大前掌向着你的身体落下。<br>\n背部吃力，你的身体被巨爪轻而易举地推倒，而后你的大半个身子都被压在下面。足掌的肉垫压着你的脚爪，爪趾的肉垫踩在你的背上，你感觉到什么锐利的东西抵着后颈，你大约猜得到，那是巨兽的趾甲，仿佛随时有可能将你弱小脆弱的身体贯穿。你现在一动也不敢动了。\n",
                "btn1": "继续",
                "btn1Succ": 108
            },
            {
                "id": 108,
                "content": "脚爪恰到好处地压在你身上，既不会让你觉得过于沉重，又刚好能限制住你的身体。这种感觉有些奇妙，像是在寒冬盖了十床棉被，温暖，但是厚重到呼吸都有些困难。<br>\n“不是喜欢逃跑吗，小家伙？怎么现在不跑了？” <br>\n你努力保持着呼吸，一言不发，默默承受着来自巨兽的羞辱。你觉得巨兽的声音有些耳熟，好像是……是先前败给的魔王！<br>\n巨兽仿佛能看穿你的心思，压着你的脚爪松了松，然后轻轻一蹭。比你肚皮还大的爪趾挑起你的因为慌恐而失力的身体，让你翻了个身，仰面朝天地躺在地毯上。你还没来得及调整姿势，巨爪就重新压了上来，拇趾刚好踩在你的胸口，只让你的脑袋和双臂得以活动。<br>\n现在，你可以看清楚巨兽的样貌了。\n",
                "btn1": "仰头观望",
                "btn1Succ": 109
            },
            {
                "id": 103,
                "content": "你双爪撑着地毯，往后面退了退，然后抬起脑袋，想要看清这只巨兽的样貌。但这样一来你再也逃不过巨兽的脚爪，巨爪轻而易举地锁定了你的身体然后压下……",
                "btn1": "反抗",
                "btn1Succ": 110
            },
            {
                "id": 110,
                "content": "你双爪死死撑住面前那根比你肚皮还大的爪趾。你的双臂用力往前推，爪子深深嵌进了肉垫里，但脚爪还是在一点点向着你的方向落下来。你的双臂发软，在颤抖着，你额头冒汗，喘着粗气，终于你的胳膊酸痛无力地弯曲下来，宣告着你与巨兽爪趾的对抗失败了。<br>\n你仰面朝天地躺在地毯上，巨爪沉沉压下来，拇趾刚好踩在你的胸口，只让你的脑袋和双臂得以活动。你的身躯在巨兽爪下动弹不得，你必须十分努力地进行呼吸，才能让满是巨爪味道的空气在你的肺部流通。\n",
                "btn1": "继续",
                "btn1Succ": 109
            },
            {
                "id": 105,
                "content": "你眼睁睁地看着巨爪从屋顶高的地方缓缓落下，几团粉色的粗糙的肉球在你面前不断放大，你再想躲闪已经来不及了。巨爪离你越来越近，几乎要贴到你的脸上，你现在唯一能做的就是用爪臂撑住。",
                "btn1": "试图阻止脚爪落下",
                "btn1Succ": 110
            },
            {
                "id": 109,
                "content": "你仰躺在巨兽的爪底，瞻仰着巨兽的样貌。他的身体像三四层楼一样高大，双腿像两棵大树一样粗壮，他的脑袋高傲地正视前方，根本没有把你放在眼里，于是你的视线被他的白色绒毛覆盖的长吻下巴遮住，看不清巨兽的面庞。<br>\n橙色是他的主色调，除此之外，白色绒毛从下巴一路向下，在胸前聚起一团蓬松的长毛。再往下，白色继续覆盖到他的腹部，最终消失在胯下，一团蓬勃的耻毛——只露出来一点，大部分都被一条白色橙边的四角内裤遮住了。内裤前面是一个看上去柔软却十分饱满的大包，你不禁思索着里面藏着的那个家伙如果舒展开来该有多大。<br>\n巨兽披着一条红如鲜血的披风，巨大的尾巴被披风遮挡，尾尖从身后绕到身前。即便是没有看清他的面部，你也完全知道这只巨兽是谁了。先前轻易将你击败的，不喜欢杀戮却沉迷在黑魔法中的狐族魔王——斯沃。\n",
                "btn1": "……",
                "btn1Succ": 107
            },
            {
                "id": 111,
                "content": "你灵机一动，有了一个大胆的想法。你注意到巨兽的脚爪后面还拖着一件鲜红的披风，以及一条巨大而蓬松的橙色尾巴。巨爪再次落下的时候，你的心脏因为紧张砰砰直跳，你要施展你天才般的计划了。<br>\n你先是闪身到脚爪之后，抱住巨兽的爪根。待巨兽抬起脚爪，想要用力跺下去把你震开的时候，你凌空一跃，扑向巨兽身后，披风和巨兽尾巴之间的空隙。巨兽理所应当地转过身寻找你，但这个时候你已经抓着他甩到身后的淡黄色的尾巴尖，小心翼翼地爬了上去，藏匿在能把一栋小二层都塞满的柔软蓬松的大尾巴里。<br>\n“别躲了，小老鼠。快出来，我知道你藏在哪。” <br>\n",
                "btn1": "不敢出声",
                "btn1Succ": 113
            },
            {
                "id": 113,
                "content": "巨兽这么说着，身体却在不停转动，似乎是在到处寻找。你确信自己骗过了巨兽，也万幸他的尾巴并不那么敏感。<br>\n不过即便是这样，你也尽可能屏住呼吸，不敢发出一点声音，动作也轻缓、再轻缓，生怕让巨兽感觉到尾巴上有异样。大约十几秒后，巨兽不再四处找寻，而是向着一个方向走去了。你的视野被尾巴和披风遮挡，只能困难地看到地毯上花纹不断移动，你松了口气，巨兽应该放弃了或者去其他地方寻找你了，等他离开这个空旷的地方，你就可以找机会从尾巴上下来。<br>\n但是巨兽忽然转身，尾巴向后一甩，你的身体随着尾巴划过一道弧线，然后撞到了什么东西上。“咕呜……”虽然那东西鲜红、柔软，像是皮革制成，但这样快速的冲击还是让你痛苦得发出声音来。<br>\n你的双爪松开，从尾巴上掉落，落在那块巨大的红色皮革上。这样的动静，巨兽不可能发现不了异样，于是你看到那条大尾巴再次甩动，巨兽转过身来，你暴露在他的目光之下。\n",
                "btn1": "观察现在的情况",
                "btn1Succ": 21
            },
            {
                "id": 112,
                "content": "你想躲到魔法光源后面去，但城堡的厅堂大而空旷，你的行动路线一目了然。你甚至没来得及跑到那光源后面，就被身后的巨爪追上。<br>\n背部吃力，你的身体被巨爪轻而易举地推倒，而后你的大半个身子都被压在下面。足掌的肉垫压着你的脚爪，爪趾的肉垫踩在你的背上，你感觉到什么锐利的东西抵着后颈，你大约猜得到，那是巨兽的趾甲，仿佛随时有可能将你弱小脆弱的身体贯穿。你现在一动也不敢动了。\n",
                "btn1": "继续",
                "btn1Succ": 108
            },
            {
                "id": 107,
                "content": "一条大概的线索在你脑中凑齐。魔王斯沃击败你，让你昏迷过去，在这期间不知道用了什么黑魔法，把你的身体变成了现在这副模样。你还注意到，你身上的衣物全都不见了，就这样赤身裸体的被踩在斯沃足底，这让你羞愤难当。<br>\n魔王高傲的头颅缓缓垂下，深邃的紫色眼睛散发着邪魅的光芒，斯沃面带微笑看着你，这让你觉得更加不自然，身上的毛发都炸立起来。“那么，‘小’游戏正式开始。”\n",
                "btn1": "所以你所谓的游戏就是把我变小，然后用你肮脏的脚爪把我踩住？",
                "btn1Succ": 114,
                "btn2": "士可杀，不可辱！要杀我就赶快，我可没心情陪你玩什么游戏！",
                "btn2Succ": 114
            },
            {
                "id": 114,
                "content": "“别这么激动嘛，小老鼠。既然说了是游戏，那当然是我们都能从中得到快乐的事情。来，清理它，用你的舌头，虽然我的肉垫还蛮干净的。” <br>\n斯沃说着稍微挪动脚爪向前，让拇趾压在你的脸上。你的脸贴着那颗巨大的粉色肉球，零距离的接触让你的鼻腔被脚爪的气味填满，你本能是抗拒的，但却不知怎的有一种伸出舌头的冲动。<br>\n“乖乖照我说的做，不然的话……你应该知道你现在的处境。”\n",
                "btn1": "尽管很不情愿但还是伸出舌头舔舐",
                "btn1Succ": 115,
                "btn2": "呸！你的威胁对我没用，想杀我那就尽管来吧！",
                "btn2Succ": 116
            },
            {
                "id": 21,
                "content": "这边内容暂时是空的，后续开放。",
                "btn1": "回到最初的起点",
                "btn1Succ": 1
            }
        ];
        var props = {"name": "墨扉", "STR": 5, "DEX": 5, "WIS": 5, "SAN": 50, "SIZE": 1};
        var totalPoint = 6;

        //页面加载之后执行
        $(function () {
            //设置全局元素大小和字体
            var height = $(document).height();
            var btnHeight = height / 20;
            var btnPadding = btnHeight * 0.2;
            var btnFont = btnHeight * 0.6;
            font = btnFont * 0.7;
            $('.btn').css("padding-top", btnPadding);
            $('.btn').css("padding-bottom", btnPadding);
            $('.btn').css("font-size", btnFont);
            $('#password').css("font-size", btnFont);
            $('.content').css("font-size", font);
            $('#msg').css("font-size", font);
            $('button').css("font-size", font);
            $('strong').css("font-size", font * 2);

            //购点模块
            totalPoint = $('#point').text();
            $('.add').click(function () {
                var dom = $(this).parent().find('.num');
                var point = parseInt(dom.text());
                if (totalPoint > 0 && point < 8) {
                    totalPoint--;
                    point++;
                    $('#point').text(totalPoint);
                    dom.text(point);
                }

            })
            $('.min').click(function () {
                var dom = $(this).parent().find('.num');
                var point = parseInt(dom.text());
                if (point > 3) {
                    totalPoint++;
                    point--;
                    $('#point').text(totalPoint);
                    dom.text(point);
                }
            })
        })

        //开始游戏吧！
        function start() {
            //修改props
            props.name = $('#playerName').text();
            props.DEX = $('#DEX').text();
            props.STR = $('#STR').text();
            props.WIS = $('#WIS').text();
            props.SAN = $('#WIS').text() * 10;
            getArt(1);
            changeProps();
        }

        //同步属性
        function changeProps() {
            $('#name').text(props.name);
            $('#pSTR').text(props.STR);
            $('#pDEX').text(props.DEX);
            $('#pWIS').text(props.WIS);
            $('#pPOW').text(props.SAN);
            var size = '1.75m';
            if (props.SIZE == 1) size = '20cm';
            else if (props.SIZE == 2) size = '5cm';
            else if (props.SIZE == 3) size = '1cm';
            else if (props.SIZE == 4) size = '1nm';
            else if (props.SIZE == 5) size = '50μm'
            $('#pSIZ').text(size);
        }

        //加载一个信息块
        function getArt(id) {
            if (id == 99999) {
                location.reload();
            }

            var data = datas[0];
            for (i = 0; i < datas.length; i++) {
                if (datas[i].id == id) {
                    data = datas[i];
                }
            }
            var reg = new RegExp("\{name\}", "g");
            var content = data.content.replace(reg, props.name);
            $('#content').html(content);

            //选项1
            if (data.btn1) {
                $('#btn1').css('display', 'block');
                if (!data.btn1Type) {
                    $('#btn1').html('<a href="javascript:getArt(' + data.btn1Succ + ')">' + data.btn1 + '</a>');
                } else {
                    var link = "javascript:showMsg('nbcs','能力检定','点击确定按钮开始检定','',true,'" + data.btn1Type + "',1," + data.difficulty1 + ")";

                    // var link = "javascript:showMsg('nbcs','检定结果','" + checkText + "','',true)";
                    $('#btn1').html('<a href="' + link + '">' + data.btn1 + '</a>');
                    checkedData = data;
                }
            } else {
                $('#btn1').css('display', 'none');
                $('#btn1').html('');
            }

            if (data.btn2) {
                $('#btn2').css('display', 'block');
                if (!data.btn2Type) {
                    $('#btn2').html('<a href="javascript:getArt(' + data.btn2Succ + ')">' + data.btn2 + '</a>');
                } else {
                    var link = "javascript:showMsg('nbcs','能力检定','点击确定按钮开始检定','',true,'"
                        + data.btn2Type + "',2," + data.difficulty2 + ")";

                    // var link = "javascript:showMsg('nbcs','检定结果','" + checkText + "','',true)";
                    $('#btn2').html('<a href="' + link + '">' + data.btn2 + '</a>');
                    checkedData = data;
                }
            } else {
                $('#btn2').css('display', 'none');
                $('#btn2').html('');
            }

            if (data.btn3) {
                $('#btn3').css('display', 'block');
                if (!data.btn3Type) {
                    $('#btn3').html('<a href="javascript:getArt(' + data.btn3Succ + ')">' + data.btn3 + '</a>');
                } else {
                    var link = "javascript:showMsg('nbcs','能力检定','点击确定按钮开始检定','',true,'" + data.btn3Type + "',3," + data.difficulty2 + ")";

                    // var link = "javascript:showMsg('nbcs','检定结果','" + checkText + "','',true)";
                    $('#btn3').html('<a href="' + link + '">' + data.btn3 + '</a>');
                    checkedData = data;
                }
            } else {
                $('#btn3').css('display', 'none');
                $('#btn3').html('');
            }

            if (data.btn4) {
                $('#btn4').css('display', 'block');
                if (!data.btn4Type) {
                    $('#btn4').html('<a href="javascript:getArt(' + data.btn4Succ + ')">' + data.btn4 + '</a>');
                } else {
                    var link = "javascript:showMsg('nbcs','能力检定','点击确定按钮开始检定','',true,'" + data.btn4Type + "',4," + data.difficulty2 + ")";

                    // var link = "javascript:showMsg('nbcs','检定结果','" + checkText + "','',true)";
                    $('#btn4').html('<a href="' + link + '">' + data.btn4 + '</a>');
                    checkedData = data;
                }
            } else {
                $('#btn4').css('display', 'none');
                $('#btn4').html('');
            }


        }

        //进行能力检定
        function propCheck(type, difficulty) {
            var prop = 0;
            var dice = Math.ceil(Math.random() * 100);
            var checkText = props.name + '的';
            if (type == 'STR') {
                checkText += '力量检定';
                prop = props.STR * 10;
            } else if (type == 'DEX') {
                checkText += '敏捷检定';
                prop = props.DEX * 10;
            } else if (type == 'WIS') {
                checkText += '感知检定';
                prop = props.WIS * 10;
            } else if (type == 'SC') {
                checkText += '意志检定';
                prop = props.SAN;
            }

            //意志检定
            if (type == 'SC') {
                if (prop >= dice) {
                    //成功
                    var s1 = Math.floor(Math.random() * 6) + 1;
                    checkText += '成功。意志磨灭了' + s1 + '点。'
                    props.SAN -= s1;
                    succ = 1;
                } else {
                    //失败
                    var s2 = Math.floor(Math.random() * 15) + 4;
                    checkText += '失败。你感觉到你的理智在被吞噬，你的意志磨灭了' + s2 + '点。'
                    props.SAN -= s2;
                    succ = 2;
                }
            } else {
                //其他检定
                if (dice > prop * difficulty) {
                    succ = 2;
                    checkText += '失败';
                } else {
                    succ = 1;
                    checkText += '成功！';
                }
            }
            checkText += '  (1D100=' + dice + ')';
            if (succ == 1) checkText += '<=' + prop * difficulty;
            else checkText += '>' + prop * difficulty;

            $('.smsg_content').html(checkText);
            $('.smsg_btn').attr('onclick', 'closeMsg()');
            changeProps();
        }

        //关闭弹出框
        function closeMsg() {
            //进行跳转
            //意志归0
            if (props.SAN <= 0) {
                var ending;
                if (checkedBtn == 1) ending = (checkedData.btn1Succ + '').charAt(0);
                else if (checkedBtn == 2) ending = checkedData.btn2Succ.charAt(0);
                else if (checkedBtn == 3) ending = checkedData.btn3Succ.charAt(0);
                else if (checkedBtn == 4) ending = checkedData.btn4Succ.charAt(0);

                alert(ending);
                getArt(ending + '0000');
            } else {
                if (succ == 1) {    //成功
                    if (checkedBtn == 1) getArt(checkedData.btn1Succ);
                    else if (checkedBtn == 2) getArt(checkedData.btn2Succ);
                    else if (checkedBtn == 3) getArt(checkedData.btn3Succ);
                    else if (checkedBtn == 4) getArt(checkedData.btn4Succ);
                } else if (succ == 2) { //失败
                    if (checkedBtn == 1) getArt(checkedData.btn1Def);
                    else if (checkedBtn == 2) getArt(checkedData.btn2Def);
                    else if (checkedBtn == 3) getArt(checkedData.btn3Def);
                    else if (checkedBtn == 4) getArt(checkedData.btn4Def);
                } else if (succ == 3) { //大成功
                    if (checkedBtn == 1) getArt(checkedData.btn1BS);
                    else if (checkedBtn == 2) getArt(checkedData.btn2BS);
                    else if (checkedBtn == 3) getArt(checkedData.btn3BS);
                    else if (checkedBtn == 4) getArt(checkedData.btn4BS);
                } else if (succ == 4) { //大失败
                    if (checkedBtn == 1) getArt(checkedData.btn1EF);
                    else if (checkedBtn == 2) getArt(checkedData.btn2EF);
                    else if (checkedBtn == 3) getArt(checkedData.btn3EF);
                    else if (checkedBtn == 4) getArt(checkedData.btn4EF);
                }
            }


            var $cover = $('.smsg_cover');
            if ($cover.get(0)) {
                $cover.css('z-index', '-100');
                $cover.fadeTo(300, 0);
            }
            var $smsg = $('[smsg=smsg]');
            $smsg.fadeOut(300);
        }

        // showMsg() 展示一个消息框
        function showMsg(id, title, content, btn, needCover, type, btnIndex, difficulty) {
            if (!id) {
                alert('友情提示:您未填写弹出框的id');
                return false;
            }
            checkedBtn = btnIndex;
            var $msg = $('#' + id);
            if ($msg.get(0)) {
                $($msg).remove();
            }
            /*alert('友情提示:您填写的可能不是一个正确id');
            return false;*/
            //现在,我们要手动创建一个这样的弹出层.
            var smsg = '<div class="smsg s-blue" id="' + id + '" smsg="smsg">' +
                '<div class="smsg_head shd-blue">' +
                '<div class="smsg_bar sbar_blue"><span class="smsg_title">' +
                'insert title here</span></div>' +
                '</div>' +
                '<div class="smsg_body sbody-blue"><br /><span class="smsg_content">' +
                'insert content here</span></div><div class="smsg_foot sfoot-blue">' +
                '<button class="sbtn sbtn_blue smsg_btn"' +
                'onclick="propCheck(\'' + type + '\',' + difficulty + ')"></button></div></div>';

            $('body').append(smsg);
            $msg = $('#' + id);

            $msg.find('.smsg_title').text(title);
            $msg.find('.smsg_img').hide();
            $msg.find('.smsg_content').html(content);
            changeCloseBtn($msg, true, false, '确定');
            //需要遮罩层
            if (needCover) {
                var $cover = $('.smsg_cover');
                if (!$cover.get(0)) {
                    $('body').before('<div class="smsg_cover"></div>');
                }
            }
            if ($msg.css('display') == 'none') {
                goCenter($msg);
                var $cover = $('.smsg_cover');
                if (needCover && $cover.get(0)) {
                    $cover.css('z-index', '99');
                    $cover.fadeTo(300, 0.5);
                }
                $msg.fadeIn(300);
            }
            $('.smsg_title').css("font-size", font * 0.8);
            $('button').css("font-size", font * 0.9);
            $('.smsg_content').css("font-size", font);
        }

        //更换关闭按钮,内部使用
        function changeCloseBtn($dom, isbtn, isclose, btnval) {
            var $btn = $dom.find('.smsg_btn');

            $btn.text(btnval);


            if (isbtn) {
                $btn.show();
            } else {
                $btn.hide();
            }

        }

        //让弹框出现在屏幕中央
        function goCenter($dom) {
            var h = $(window).height();
            var w = $(window).width();
            var st = $(window).scrollTop();
            var sl = $(window).scrollLeft();
            $dom.css('width', w * 0.8);
            $dom.css('position', 'fixed');
            $dom.css("top", (h * 0.3));
            $dom.css("left", (w * 0.1));
            /*$dom.css("top", (h * 0.3) + st);
            $dom.css("left", (w * 0.3) + sl);*/
            $dom.css('box-shadow', '0px 0px 10px 5px lightblue');
        }


    </script>
    <style type="text/css">
        .btn {
            width: 100%;
            border: 1px solid black;
            border-radius: 3px;
            background-color: lightskyblue;
        }

        .bigdiv {
            width: 80%;
            margin: 0px auto;
            text-align: center;
            vertical-align: middle;
        }

        a {
            text-decoration: none;
            color: white;
            display: block;

        }

        .myDiv {
            padding: 8px;
            margin: 5px;
        }

        .btn {
            display: none;
        }

        .content {
            width: 100%;
            border: 1px solid black;
            border-radius: 3px;
            text-align: left;
        }

        #password {
            border-top: none;
            border-left: none;
            border-right: none;
            background-color: #F8F8F8;
        }

        .update {
            border: 1px solid black;
            display: inline;
        }

        .smsg_cover {
            width: 100%;
            height: 100%;
            position: fixed;
            background: white;
            filter: Alpha(opacity=0);
            opacity: 0;
        }

        .s-blue {
            color: black;
            text-align: center;
            border-radius: 8px;
            position: absolute;
            background-color: white;
            z-index: 100;
            display: none;
        }

        .shd-blue,
        .sfoot-blue {
            width: 100%;
            margin: 0px;
            padding: 8px;
        }

        .shd-blue {
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            background-color: #1E9FFF;
            text-align: left;
            padding-top: 0px;
            padding-bottom: 0px;
        }

        .sfoot-blue {
            border-bottom-left-radius: 6px;
            border-bottom-right-radius: 6px;
            background-color: #F8F8F8;
        }

        .sbody-blue {
            padding: 8px;
            background-color: #F8F8F8;
            width: 100%;
        }

        .sclose-blue {
            display: none;
            color: white;
            text-align: right;
        }

        .sa-blue,
        .sa-blue:hover,
        .sa-blue:visited,
        .sa-blue:active {
            text-decoration: none;
            color: white;
            cursor: pointer;
        }

        .sbar_blue {
            padding-top: 2px;
            padding-bottom: 2px;
            width: 100%;
        }

        .sbar_blue:hover {
            cursor: move;
        }

        .sbtn {
            color: white;
            background-color: gray;
            border: 0;
            font-weight: 500;
            border-radius: 3px;
            padding: 6px 15px 6px 15px;
            text-decoration: none;
        }

        .sbtn:hover {
            filter: Alpha(opacity=0.7);
            opacity: 0.7;
            cursor: pointer;
        }

        .sbtn_blue {
            background: #1E9FFF;
        }

        strong {
            color: grey;
            display: block;
            text-align: center;
        }

        #usepoint {
            display: block;
            text-align: center;
        }

        #start {
            display: block;
            text-align: center;
        }

        #prop {
            text-align: center;
            margin-top: 20px;
        }

    </style>
</head>
<body>
<!--修改#playerName元素中的内容之后点击开始 即可在本次游戏中更换角色姓名！-->
<div class="bigdiv">
    <div class="content myDiv" id="prop">
        <span id="name">墨扉</span>
        &nbsp;&nbsp;STR:<span id="pSTR">?</span>
        &nbsp;&nbsp;DEX:<span id="pDEX">?</span>
        &nbsp;&nbsp;WIS:<span id="pWIS">?</span>
        &nbsp;&nbsp;POW:<span id="pPOW">??</span>
        &nbsp;&nbsp;SIZ:<span id="pSIZ">1.75m</span>
    </div>
    <div class="content myDiv" id="content">
        <div id="#player">
            <!--修改playerName中的内容之后点击开始 即可在本次游戏中更换角色姓名！-->
            <strong id="playerName">墨扉</strong>

            <ul>
                <li>力量：<font class="num" id="STR">3</font>
                    <button class="add">&nbsp;+&nbsp;</button>
                    <button class="min">&nbsp;-&nbsp;</button>
                    （决定角色能使出的力气，以及攀爬、游泳等运动能力）
                </li>
                <li>敏捷：<font class="num" id="DEX">3</font>
                    <button class="add">&nbsp;+&nbsp;</button>
                    <button class="min">&nbsp;-&nbsp;</button>
                    （决定角色的身体灵活程度，以及潜行、逃脱和特技动作等能力）
                </li>
                <li>感知：<font class="num" id="WIS">3</font>
                    <button class="add">&nbsp;+&nbsp;</button>
                    <button class="min">&nbsp;-&nbsp;</button>
                    （决定角色的意志力、常识判断力和直觉，以及侦查等能力）
                </li>
            </ul>
            <span id="usepoint">可用点数：<span id="point">6</span></span><br>
            <div id="start">
                <button onclick="start()" class="myDiv">&nbsp;开始&nbsp;</button>
            </div>
        </div>
    </div>

    <div class="btn myDiv" id="btn1"></div>
    <div class="btn myDiv" id="btn2"></div>
    <div class="btn myDiv" id="btn3"></div>
    <div class="btn myDiv" id="btn4"></div>


</div>
</body>
</html>